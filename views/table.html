<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags-->
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="au theme template" />
    <meta name="author" content="Hau Nguyen" />
    <meta name="keywords" content="au theme template" />

    <!-- Title Page-->
    <title>ESHOT | Data</title>

    <!-- Fontfaces CSS-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/dataTables.bootstrap4.min.css"> 
    <link href="css/font-face.css" rel="stylesheet" media="all" />
    <link
      href="vendor/font-awesome-4.7/css/font-awesome.min.css"
      rel="stylesheet"
      media="all"
    />
    <link
      href="vendor/font-awesome-5/css/fontawesome-all.min.css"
      rel="stylesheet"
      media="all"
    />
    <link
      href="vendor/mdi-font/css/material-design-iconic-font.min.css"
      rel="stylesheet"
      media="all"
    />

    <!-- Bootstrap CSS-->
    <link
      href="vendor/bootstrap-4.1/bootstrap.min.css"
      rel="stylesheet"
      media="all"
    />

    <!-- Vendor CSS-->
    <link
      href="vendor/animsition/animsition.min.css"
      rel="stylesheet"
      media="all"
    />
    <link
      href="vendor/bootstrap-progressbar/bootstrap-progressbar-3.3.4.min.css"
      rel="stylesheet"
      media="all"
    />
    <link href="vendor/wow/animate.css" rel="stylesheet" media="all" />
    <link
      href="vendor/css-hamburgers/hamburgers.min.css"
      rel="stylesheet"
      media="all"
    />
    <link href="vendor/slick/slick.css" rel="stylesheet" media="all" />
    <link href="vendor/select2/select2.min.css" rel="stylesheet" media="all" />
    <link
      href="vendor/perfect-scrollbar/perfect-scrollbar.css"
      rel="stylesheet"
      media="all"
    />

    <!-- Main CSS-->
    <link href="css/theme.css" rel="stylesheet" media="all" />
    <script src="./script.js"></script>
  </head>

  <body class="animsition">
    <div class="page-wrapper">
      <!-- HEADER MOBILE-->
      <header class="header-mobile d-block d-lg-none"></header>
      <!-- END HEADER MOBILE-->

      <!-- MENU SIDEBAR-->
      <aside class="menu-sidebar d-none d-lg-block">
        <div class="logo">
          <a href="/">
            <img src="images/icon/logo.png" alt="ESHOT" />
          </a>
        </div>
        <div class="menu-sidebar__content js-scrollbar1">
          <nav class="navbar-sidebar">
            <ul class="list-unstyled navbar__list">
              <li>
                <a class="js-arrow" href="/">
                  <i class="fas fa-tachometer-alt"></i>Dashboard</a
                >
              </li>
              <li class="active has-sub">
                <a href="/table"> <i class="fas fa-table"></i>Tables</a>
              </li>
            </ul>
          </nav>
        </div>
      </aside>
      <!-- END MENU SIDEBAR-->

      <!-- PAGE CONTAINER-->
      <div class="page-container">
        <!-- HEADER DESKTOP-->
        <header class="header-desktop">
          <div class="section__content section__content--p30">
            <div class="container-fluid">
              <div class="header-wrap"></div>
            </div>
          </div>
        </header>
        <!-- END HEADER DESKTOP-->

        <!-- MAIN CONTENT-->
        <div class="main-content">
          <div class="section__content section__content--p30">
            <div class="container-fluid">
              <div class="row">
                <div class="col-md-12">
                  <div class="card-body">
                    <table id="reservationTable" class="table table-bordered table-striped">
                      <thead>
                        <tr>
                          <th>Hat Numarası</th>
                          <th>Hat İsmi</th>
                          <th>İlçe ID</th>
                        </tr>
                      </thead>
                      <tbody>
                      </tbody>
                    </table>
                  </div>
                </div>  
                <div class="container">
                  <form id="hatEkleForm" action="/table/submit" method="post">
                    <div class="row">
                      <div class="col-md-3">
                        <div class="form-group">
                          <label for="hatNumarasi">Hat Numarası:</label>
                          <input type="text" class="form-control" id="hatNumarasi" name="hatNumarasi" placeholder="Hat numarasını girin" required>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="form-group">
                          <label for="hatIsmi">Hat İsmi:</label>
                          <input type="text" class="form-control" id="hatIsmi" name="hatIsmi" placeholder="Hat ismini girin" required>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="form-group">
                          <label for="ilceId">İlçe ID:</label>
                          <input type="text" class="form-control" id="ilceId" name="ilceId" placeholder="İlçe ID'yi girin" required>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="form-group">
                          <button type="submit" class="btn btn-primary" style="margin-top: 32px;">Hat Ekle</button>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
    </div>  

    <!-- Jquery JS-->
    <script src="vendor/jquery-3.2.1.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <!-- Bootstrap JS-->
    <script src="vendor/bootstrap-4.1/popper.min.js"></script>
    <script src="vendor/bootstrap-4.1/bootstrap.min.js"></script>
    <!-- Vendor JS -->
    <script src="vendor/slick/slick.min.js"></script>
    <script src="vendor/wow/wow.min.js"></script>
    <script src="vendor/animsition/animsition.min.js"></script>
    <script src="vendor/bootstrap-progressbar/bootstrap-progressbar.min.js"></script>
    <script src="vendor/counter-up/jquery.waypoints.min.js"></script>
    <script src="vendor/counter-up/jquery.counterup.min.js"></script>
    <script src="vendor/circle-progress/circle-progress.min.js"></script>
    <script src="vendor/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="vendor/chartjs/Chart.bundle.min.js"></script>
    <script src="vendor/select2/select2.min.js"></script>

    <script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.25/js/dataTables.bootstrap4.min.js"></script> 
    <!-- Main JS-->
    <script src="js/main.js"></script>

    <script>
      // API'den veri çekme ve DataTable oluşturma
      $(document).ready(function () {
        $.ajax({
          url: "http://localhost:3000/api/hat", // API endpoint'i
          method: "GET",
          success: function (data) {
            // DataTables kullanarak tabloyu oluştur
            $("#reservationTable").DataTable({
              data: data.message,
              columns: [
                { data: "h_id", title: "Hat Numarası" }, // API'den gelen veri yapısına uygun olarak güncellendi
                { data: "h_ad", title: "Hat İsmi" }, // API'den gelen veri yapısına uygun olarak güncellendi
                { data: "ilce_id", title: "İlçe ID" }, // API'den gelen veri yapısına uygun olarak güncellendi
              ],
            })
          },error:function (jqXHR, textStatus, errorThrown) {
            console.error("API isteği başarısız oldu:", textStatus, errorThrown);
          }
        });
      });
    </script>
  </body>
</html>
<!-- end document-->
